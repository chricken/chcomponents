'use strict';

import dom from '../../dom.js';

const template = dom.create({
    cssClassName: 'container'
});

const parentInput = dom.create({
    cssClassName: 'wrapperInput',
    parent: template
})

const elInput = dom.create({
    parent: parentInput,
    cssClassName: 'parentInput',
    type: 'input'
})

const btnClearInput = dom.create({
    parent: parentInput,
    cssClassName: 'btnClear btn transition',
})

const btnClearInputInner = dom.create({
    parent: btnClearInput,
    content: 'âœ–',
    cssClassName: 'inner',
})

let path = new URL(import.meta.url).pathname;

path = `${path.substring(0, path.lastIndexOf('/') + 1)}styles.css`;
let pathParent = path.split('/');
pathParent.splice(pathParent.length - 3, 2)
pathParent = pathParent.join('/');
console.log(pathParent);


const elStyle = dom.create({
    type: 'style',
    parent: template,
    content: `
        @import '${path}';
    `
});

elStyle.innerHTML += `@import "${pathParent}";`;

fetch('/chcomponents.css')
    .then(response => response.text())
    .then(data => {
        if (!data.startsWith('<!DOCTYPE html>')) {
            console.log('add global CSS');
            elStyle.innerHTML += '@import "/chcomponents.css";'
        }
    }).catch(
        console.warn
    );


export default template;