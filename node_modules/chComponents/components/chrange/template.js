'use strict';

import dom from '../../dom.js';

const template = dom.create({
    cssClassName: 'container'
});


const parentRange = dom.create({
    parent: template,
    cssClassName: 'parentRange',
})

const parentInput = dom.create({
    cssClassName: 'wrapperInput',
    parent: template
})



const elRange = dom.create({
    parent: parentRange,
    cssClassName: 'railRange',
})

// Dieses Element wird gesondert exportiert, um es mehrfach einbinden zu können
// Es wird nicht ins Template eingehängt
const elHandle = dom.create({
    cssClassName: 'railHandle',
})

// Dieses Element wird gesondert exportiert, um es mehrfach einbinden zu können
// Es wird nicht ins Template eingehängt
const elInput = dom.create({
    cssClassName: 'parentInput',
    type: 'input',
    attr: {
        type: 'text'
    }
})


let path = new URL(import.meta.url).pathname;

path = `${path.substring(0, path.lastIndexOf('/') + 1)}styles.css`;
let pathParent = path.split('/');
pathParent.splice(pathParent.length - 3, 2)
pathParent = pathParent.join('/');
// console.log(pathParent);


const elStyle = dom.create({
    type: 'style',
    parent: template,
    content: `
        @import '${path}';
    `
});

elStyle.innerHTML += `@import "${pathParent}";`;

fetch('/chcomponents.css')
    .then(response => response.text())
    .then(data => {
        if (!data.startsWith('<!DOCTYPE html>')) {
            // console.log('add global CSS');
            elStyle.innerHTML += '@import "/chcomponents.css";'
        }
    }).catch(
        console.warn
    );


export default { template, elHandle, elInput };